(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{hf3x:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=e("t/Na"),o=e("ZYCi"),i=(e("OO+k"),e("HNzf")),r=e("J/mm"),c=e("e8Qb"),s=e("f+iR"),a=function(n,l,e,t){return new(e||(e=Promise))(function(u,o){function i(n){try{c(t.next(n))}catch(l){o(l)}}function r(n){try{c(t.throw(n))}catch(l){o(l)}}function c(n){n.done?u(n.value):new e(function(l){l(n.value)}).then(i,r)}c((t=t.apply(n,l||[])).next())})},b=function(n,l){var e,t,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,t&&(u=2&o[0]?t.return:o[0]?t.throw||((u=t.return)&&u.call(t),0):t.next)&&!(u=u.call(t,o[1])).done)return u;switch(t=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,t=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(u=(u=i.trys).length>0&&u[u.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){i.label=o[1];break}if(6===o[0]&&i.label<u[1]){i.label=u[1],u=o;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(o);break}u[2]&&i.ops.pop(),i.trys.pop();continue}o=l.call(n,i)}catch(r){o=[6,r],t=0}finally{e=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},p=function(){function n(n,l,e,t,i){var c=this;this.appService=n,this.nativeStorage=l,this.router=e,this.httpClient=t,this.toastController=i,this.currentUser=null,this.newsitems=[],this.mainTitle="",Object(s.b)("NewsfeedPage#constructor"),n.setTitle("Newsfeed"),this.mainTitle="Newsfeed",this.nativeStorage.getItem("current_user").then(function(n){return JSON.parse(n)}).then(function(n){return a(c,void 0,void 0,function(){var l,e;return b(this,function(t){switch(t.label){case 0:if(Object(s.b)(n,"data 6"),this.currentUser=n,"facebook"!=n.type)return[3,2];if(l=new u.g,n.longTermToken)l=(new u.g).set("accessToken",n.longTermToken);else{if(!n.accessToken)throw"neither longTermToken nor accessToken";l=(new u.g).set("accessToken",n.accessToken)}return[4,this.httpClient.get(r.a.newsitems,{params:l}).toPromise()];case 1:return e=t.sent(),this.newsitems=e.newsitems,[3,3];case 2:throw"Only fb login is supported (missing)";case 3:return[2]}})})},function(n){return a(c,void 0,void 0,function(){return b(this,function(l){switch(l.label){case 0:return console.log("+++ newsfeed doesnt have current_user:",n),[4,this.toastController.create({message:"You are not logged in - please login.",duration:2e3})];case 1:return l.sent().present(),[2]}})})}),e.events.subscribe(function(n){n instanceof o.d&&c.ngOnInit()})}return n.prototype.ngOnInit=function(){var n=this;this.appService.currentMessage.subscribe(function(l){console.log("+++ new message:",l),l==s.a.didLogin&&n.render()})},n.prototype.render=function(){var n=this;Object(s.b)("newsfeed.page#render"),this.nativeStorage.getItem("current_user").then(function(n){return JSON.parse(n)}).then(function(l){if(Object(s.b)(l,"current_user 5"),n.currentUser=l,"facebook"==l.type){var e=(new u.g).set("accessToken",l.accessToken);n.httpClient.get(r.a.newsitems,{params:e}).subscribe(function(l){l.newsitems&&(n.newsitems=l.newsitems)},function(l){return a(n,void 0,void 0,function(){return b(this,function(n){switch(n.label){case 0:return console.log("+++ error from m3 1-:",JSON.stringify(l)),[4,this.toastController.create({message:"The token has expired? Please login.",duration:2e3})];case 1:return n.sent().present(),[2]}})})})}},function(l){return a(n,void 0,void 0,function(){return b(this,function(n){switch(n.label){case 0:return console.log("+++ newsfeed doesnt have current_user:",l),[4,this.toastController.create({message:"You are not logged in - please login.",duration:2e3})];case 1:return n.sent().present(),[2]}})})})},n.prototype.ionViewDidLoad=function(){console.log("+++ newsfeed ionViewDidLoad")},n}(),f=function(){return function(){}}(),h=e("pMnS"),d=e("ra/t"),g=e("ntG5"),m=e("M9A9"),w=e("tXrQ"),v=e("Ip0R"),x=e("P87I"),k=t.nb({encapsulation:0,styles:[['@charset "UTF-8";.thumb[_ngcontent-%COMP%]{height:2rem;float:left}.flex-scroll-container[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;width:100%;height:80vh;padding:0;margin-bottom:15px}.flex-scroll[_ngcontent-%COMP%]{min-width:100%;height:100%;display:-webkit-box;display:flex;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar;padding:0;margin:0}.flex-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none;height:80vh}.flex-scroll-inner[_ngcontent-%COMP%]{padding-right:0;border:0;margin:auto}.medium-cover[_ngcontent-%COMP%]{background:#cecece;-o-object-fit:cover;object-fit:cover;-webkit-box-flex:0;flex:0 0 0;min-width:16em;height:100%;margin:0}.medium-photo[_ngcontent-%COMP%]{padding:2vh;max-height:80vh;min-width:20em;-o-object-fit:cover;object-fit:cover;border:1px solid red;margin:0}.medium-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:auto}.medium-video[_ngcontent-%COMP%]{background:#cecece;min-height:100%;height:100%;min-width:30em;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;margin:0 0 0 2em}.medium-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-height:70vh}']],data:{}});function O(n){return t.Db(0,[(n()(),t.pb(0,0,null,null,8,"div",[],null,null,null,null,null)),(n()(),t.pb(1,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.pb(2,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.pb(3,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.pb(4,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t.Cb(-1,null,["\xa0 \xa0 \xa0 Loading..."])),(n()(),t.pb(6,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.pb(7,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.pb(8,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function y(n){return t.Db(0,[(n()(),t.pb(0,0,null,null,5,"ion-item",[["class","flex-scroll-inner"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t.zb(n,2).onClick(e)&&u),u},d.v,d.h)),t.ob(1,49152,null,0,g.C,[t.h,t.k],null,null),t.ob(2,16384,null,0,m.a,[[2,o.n],w.a,t.k],null,null),(n()(),t.pb(3,0,null,0,2,"ion-card",[["class","medium-photo"],["padding",""]],null,null,null,d.r,d.d)),t.ob(4,49152,null,0,g.h,[t.h,t.k],null,null),(n()(),t.pb(5,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,5,0,l.context.$implicit.small_url)})}function C(n){return t.Db(0,[(n()(),t.pb(0,0,null,null,12,"div",[["class","flex-scroll-container"],["padding",""]],null,null,null,null,null)),(n()(),t.pb(1,0,null,null,11,"ion-list",[["class","flex-scroll"],["lines","none"]],null,null,null,d.x,d.j)),t.ob(2,49152,null,0,g.J,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(3,0,null,0,7,"ion-card",[["class","medium-cover"],["padding",""]],null,null,null,d.r,d.d)),t.ob(4,49152,null,0,g.h,[t.h,t.k],null,null),(n()(),t.pb(5,0,null,0,3,"p",[],null,null,null,null,null)),(n()(),t.pb(6,0,null,null,1,"ion-icon",[["name","camera"],["slot","start"]],null,null,null,d.u,d.g)),t.ob(7,49152,null,0,g.x,[t.h,t.k],{name:[0,"name"]},null),(n()(),t.Cb(8,null,[" \xa0 "," (",")"])),(n()(),t.pb(9,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),t.Cb(10,null,["",""])),(n()(),t.gb(16777216,null,0,1,null,y)),t.ob(12,278528,null,0,v.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,"none"),n(l,7,0,"camera"),n(l,12,0,l.parent.context.$implicit.photos)},function(n,l){n(l,8,0,l.parent.context.$implicit.name,l.parent.context.$implicit.photos.length),n(l,10,0,l.parent.context.$implicit.created_at)})}function _(n){return t.Db(0,[(n()(),t.pb(0,0,null,null,13,"div",[["class","flex-scroll-container"],["padding",""]],null,null,null,null,null)),(n()(),t.pb(1,0,null,null,12,"ion-list",[["class","flex-scroll"],["lines","none"]],null,null,null,d.x,d.j)),t.ob(2,49152,null,0,g.J,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(3,0,null,0,7,"ion-card",[["class","medium-cover"],["padding",""]],null,null,null,d.r,d.d)),t.ob(4,49152,null,0,g.h,[t.h,t.k],null,null),(n()(),t.pb(5,0,null,0,3,"p",[],null,null,null,null,null)),(n()(),t.pb(6,0,null,null,1,"ion-icon",[["name","videocam"],["slot","start"]],null,null,null,d.u,d.g)),t.ob(7,49152,null,0,g.x,[t.h,t.k],{name:[0,"name"]},null),(n()(),t.Cb(8,null,[" \xa0 ",""])),(n()(),t.pb(9,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),t.Cb(10,null,["",""])),(n()(),t.pb(11,0,null,0,2,"ion-card",[["class","medium-video"],["padding",""]],null,null,null,d.r,d.d)),t.ob(12,49152,null,0,g.h,[t.h,t.k],null,null),(n()(),t.pb(13,0,null,0,0,"video",[["controls",""],["width","100%"]],[[8,"src",4]],null,null,null,null))],function(n,l){n(l,2,0,"none"),n(l,7,0,"videocam")},function(n,l){n(l,8,0,l.parent.context.$implicit.name),n(l,10,0,l.parent.context.$implicit.created_at),n(l,13,0,t.rb(1,"",l.parent.context.$implicit.url,""))})}function T(n){return t.Db(0,[(n()(),t.pb(0,0,null,null,6,"ion-item",[["class","item-borderless"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t.zb(n,2).onClick(e)&&u),u},d.v,d.h)),t.ob(1,49152,null,0,g.C,[t.h,t.k],null,null),t.ob(2,16384,null,0,m.a,[[2,o.n],w.a,t.k],null,null),(n()(),t.gb(16777216,null,0,1,null,C)),t.ob(4,16384,null,0,v.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,_)),t.ob(6,16384,null,0,v.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,4,0,l.context.$implicit.photos),n(l,6,0,"video"==l.context.$implicit.item_type)},null)}function P(n){return t.Db(0,[(n()(),t.pb(0,0,null,null,5,"ion-content",[],null,null,null,d.s,d.e)),t.ob(1,49152,null,0,g.p,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,3,"ion-list",[["lines","none"]],null,null,null,d.x,d.j)),t.ob(3,49152,null,0,g.J,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.gb(16777216,null,0,1,null,T)),t.ob(5,278528,null,0,v.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,3,0,"none"),n(l,5,0,e.newsitems)},null)}function j(n){return t.Db(0,[(n()(),t.gb(16777216,null,null,1,null,O)),t.ob(1,16384,null,0,v.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,null,1,null,P)),t.ob(3,16384,null,0,v.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,0==e.newsitems.length),n(l,3,0,e.newsitems)},null)}function I(n){return t.Db(0,[(n()(),t.pb(0,0,null,null,1,"app-newsfeed",[],null,null,null,j,k)),t.ob(1,114688,null,0,p,[c.a,i.a,o.n,u.c,x.a],null,null)],function(n,l){n(l,1,0)},null)}var M=t.lb("app-newsfeed",p,I,{},{},[]),S=e("gIcY"),D=e("95zI"),L=e("9opb"),N=e("apKv"),$=e("B4/3");e.d(l,"NewsfeedPageModuleNgFactory",function(){return J});var J=t.mb(f,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[h.a,M]],[3,t.j],t.x]),t.xb(4608,v.k,v.j,[t.u,[2,v.q]]),t.xb(4608,S.c,S.c,[]),t.xb(4608,D.a,D.a,[t.z,t.g]),t.xb(4608,L.a,L.a,[D.a,t.j,t.q]),t.xb(4608,N.a,N.a,[D.a,t.j,t.q]),t.xb(1073742336,v.b,v.b,[]),t.xb(1073742336,S.b,S.b,[]),t.xb(1073742336,S.a,S.a,[]),t.xb(1073742336,$.a,$.a,[]),t.xb(1073742336,o.q,o.q,[[2,o.w],[2,o.n]]),t.xb(1073742336,f,f,[]),t.xb(1024,o.l,function(){return[[{path:"",component:p}]]},[])])})}}]);